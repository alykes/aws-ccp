## Section 6 - EC2 Storage    
 
### EBS Overview  
An EBS (Elastic Block Storage) Volume is a network drive you can attach to your instances  
It allows your EC2 instance to persist data, even after their termination  
For the CCP level, one EBS volume can only be mounted to one EC2 instance (AS, Dev or SysOps Level, goes into multi-attach)  
EBS Volumes are bound to a specific availability zone  
Free tier; 30GB/month of General Purpose SSD (or magnetic storage)  

### EBS Volume  
- **First and foremost, it is a network drive**  
  - It uses the network to communicate with the instance, therefore there may be some latency  
  - It can be detached from an EC2 instance and attached to another one quickly  
- It is locked to an AZ  
  - It cannot be moved from us-east-1a to us-east-1b  
  - To move the volume you would need to snapshot it  
- You have to provision capacity in adavance (as well as IOPS)  
- You can create an unattached volume  
- EBS has an attribute - `Delete on Termination`; This is selected for the root volume and not additional EBS volumes
  - To change this setting, you need to do it through the CLI, there is no way to do it in the console  
    - Windows  
    ```
    aws ec2 modify-instance-attribute `
    --instance-id i-a1b2c3d4e5f6g7 `
    --region us-east-1 `
    --block-device-mappings '[{"DeviceName": "/dev/sdf","Ebs": {"DeleteOnTermination":true}}]'
    ```
    - Linux  
    ```
    aws ec2 modify-instance-attribute \
    --instance-id i-1234567890abcdef0 \
    --region us-east-1 \
    --block-device-mappings "[{\"DeviceName\": \"/dev/sda1\",\"Ebs\":{\"DeleteOnTermination\":false}}]"
    ```
  - You can control this setting by the AWS console or through the AWS CLI  
  - Use case: Preserve root volume when the instance in terminated  

**Note about EBS Multi-Attach, it is possible with io1 and io2 volumes**  

### Creating an EBS Volume  
Go to `EC2` -> `Elastic Block Storage` -> `Volumes` -> `Create Volume`  
